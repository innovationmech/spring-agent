spring:
  application:
    name: spring-agent
  
  profiles:
    active: memory  # Options: memory, postgres
  
  main:
    allow-bean-definition-overriding: true
  
  # PostgreSQL DataSource (activated when profile is 'postgres')
  datasource:
    url: jdbc:postgresql://localhost:5432/spring_ai_db
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
  
  ai:
    ollama:
      base-url: http://localhost:11434
      chat:
        model: gpt-oss
        options:
          temperature: 0.7
          max-tokens: 1000
          top-p: 0.9
    
    # PgVector VectorStore Configuration
    vectorstore:
      pgvector:
        dimensions: 1024  # Ollama nomic-embed-text dimension
        distance-type: COSINE_DISTANCE
        index-type: HNSW
        schema-name: public
        table-name: vector_store
        initialize-schema: true
        max-document-batch-size: 10000

# Chat Memory Configuration
chat:
  memory:
    type: in-memory  # Options: in-memory, jdbc
    max-messages: 10

server:
  port: 8080

logging:
  level:
    "[org.springframework.ai]": DEBUG
    "[dev.jackelyj.spring_agent]": INFO
    "[org.springframework.ai.chat.client.advisor]": DEBUG
    "[org.springframework.jdbc]": DEBUG

---
# Memory Profile (In-Memory Mode)
spring:
  config:
    activate:
      on-profile: memory

chat:
  memory:
    type: in-memory

---
# PostgreSQL Profile (Database Mode)
spring:
  config:
    activate:
      on-profile: postgres
  
  profiles:
    active: postgres

chat:
  memory:
    type: jdbc